(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{"2ebf":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-layout",[t("q-page-container",[t("q-page",{staticClass:"flex bg-image flex-center"},[t("q-card",{style:e.$q.screen.lt.sm?{width:"80%"}:{width:"30%"}},[t("q-card-section",[t("q-form",{staticClass:"q-ma-md q-gutter-md",on:{submit:function(a){return a.preventDefault(),e.Register(a)}}},[t("q-input",{attrs:{filled:"",label:"نام کاربری","lazy-rules":""},model:{value:e.username,callback:function(a){e.username=a},expression:"username"}}),t("q-input",{attrs:{filled:"",type:"email",label:"ایمیل","lazy-rules":""},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}}),t("q-input",{attrs:{type:"password",filled:"",label:"رمز عبور","lazy-rules":""},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),t("q-input",{attrs:{type:"password",filled:"",label:"تکرار رمز عبور","lazy-rules":""},model:{value:e.password2,callback:function(a){e.password2=a},expression:"password2"}}),t("div",{staticStyle:{display:"inline"}},[e._v("\n              قبلا ثبت نام کرده اید؟\n              "),t("router-link",{attrs:{to:"/login"}},[e._v("وارد")]),e._v("\n              شوید\n            ")],1),t("div",{staticStyle:{display:"inline"}},[t("a",{attrs:{href:e.ShowGoogleAuthLink()}},[e._v("Google")])]),t("div",[t("q-btn",{attrs:{label:"ثبت نام",type:"submit",color:"primary"}})],1)],1)],1)],1)],1)],1)],1)},o=[],n=(t("d3b7"),t("e6cf"),t("a79d"),{data:function(){return{username:"",email:"",password:"",password2:""}},mounted:function(){this.isLogin()},methods:{ShowGoogleAuthLink:function(){return"https://mras.pythonanywhere.com/login/google-oauth2/"},showNotif:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"red";this.$q.notify({message:e,icon:a,color:t,position:"bottom-left",progress:!0})},isLogin:function(){var e=this;this.$axios.post("https://mras.pythonanywhere.com/api/auth/isLogin/").then((function(a){a.data.login_status&&a.data.super_user_status&&e.$router.push("/panel/user")})).catch((function(){localStorage.removeItem("token"),delete e.$axios.defaults.headers.common.Authorization,e.$q.loading.hide()}))},Register:function(){var e=this,a=new FormData;a.append("username",this.username),a.append("password",this.password),a.append("password2",this.password2),a.append("email",this.email),this.$q.loading.show(),this.$axios.post("https://mras.pythonanywhere.com/api/auth/register/",a).then((function(a){localStorage.setItem("token",a.data.access),e.$axios.defaults.headers.common.Authorization="Bearer "+a.data.access,e.$store.commit("shop/setUser",a.data.user),localStorage.setItem("username",a.data.user.username),localStorage.setItem("user_id",a.data.user.id),e.showNotif("شما با موفقیت ثبت نام کردید و ایمیل تایید هویت برای شما ارسال شد","mdi-checkbox-marked-circle-outline ","green"),e.$router.push("/panel/email/verify")})).catch((function(a){if(401===a.response.status)e.showNotif(a.response.data.message);else for(var t in a.response.data){e.showNotif(t+" : "+a.response.data[t][0]);break}})).finally((function(){e.$q.loading.hide()}))}}}),i=n,r=(t("f574"),t("2877")),l=t("4d5a"),u=t("09e3"),d=t("9989"),c=t("f09f"),p=t("a370"),m=t("0378"),h=t("27f9"),f=t("9c40"),g=t("eebe"),w=t.n(g),y=Object(r["a"])(i,s,o,!1,null,null,null);a["default"]=y.exports;w()(y,"components",{QLayout:l["a"],QPageContainer:u["a"],QPage:d["a"],QCard:c["a"],QCardSection:p["a"],QForm:m["a"],QInput:h["a"],QBtn:f["a"]})},"8e8d":function(e,a,t){},f574:function(e,a,t){"use strict";t("8e8d")}}]);